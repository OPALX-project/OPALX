Option,tfs=false;
// DATE AND TIME:    22/05/01  18.49.45
//
// FILE:   dan-nlc1.mad9
//         A version of the NLC damping ring 
//         originally in MAD8 from A. Wolski  

DRF: DRIFT, L=0.649275;

KCK: RBEND, L=1.2, ANGLE=0.0;

SPT25: RBEND, L=0.83, ANGLE=0.0;
SPT90: RBEND, L=1.0, ANGLE=0.0;

DKCK1: DRIFT, L=2.48;
DKCK2: DRIFT, L=0.7171;
DSPT1: DRIFT, L=0.2;
DSPT2: DRIFT, L=0.15;
DSPT3: DRIFT, L=2.2171;
DST: DRIFT, L=0.0;
D1: DRIFT, L=0.51;
D2: DRIFT, L=0.05;
D3: DRIFT, L=0.975;
D4: DRIFT, L=0.05;

HBB: SBEND, L=0.48, ANGLE=0.0872664626, K1=-1.0;
BB: SBEND, L=0.96, ANGLE=0.1745329252, K1=-1.0;

QAF: QUADRUPOLE, TYPE=QP, L=0.25, K1=5.624942585349;
QADH: QUADRUPOLE, TYPE=QP, L=0.125, K1=-3.780221736793;
QAD: QUADRUPOLE, TYPE=QP, L=0.25, K1=-3.780221736793;
SX: SEXTUPOLE, TYPE=SP, L=0.06, K2=3.93562048641E2*1.0;
SY: SEXTUPOLE, TYPE=SP, L=0.06, K2=-3.008642582785E2*1.0;
D2MAW: DRIFT, L=1.029;
D1MAW: DRIFT, L=0.495;
D1MW: DRIFT, L=0.94;
D2MW: DRIFT, L=0.1853;
HBBW: SBEND, L=0.48, ANGLE=0.0872664626, K1=-1.302738810837;
Q2MAW: QUADRUPOLE, TYPE=QP, L=0.15, K1=-5.475369521093;
Q1MAW: QUADRUPOLE, TYPE=QP, L=0.25, K1=6.025245887572;
Q1MW: QUADRUPOLE, TYPE=QP, L=0.25, K1=-2.773285815743;
Q2MW: QUADRUPOLE, TYPE=QP, L=0.25, K1=4.378759377176;
Q1WH: QUADRUPOLE, TYPE=QP, L=0.075, K1=2.057309731316;
Q2W: QUADRUPOLE, TYPE=QP, L=0.15, K1=1.054327112393;;
D2MAF: DRIFT, L=1.029;
D1MAF: DRIFT, L=0.495;
D1MF: DRIFT, L=0.2424;
D2MF: DRIFT, L=1.1991;
//D1F: DRIFT, L=4.3971;;
D1FSK: DRIFT, L=2.19855;
D1F: LINE=(D1FSK,D1FSK);
HBBF: SBEND, L=0.48, ANGLE=0.0872664626, K1=-0.934914796653;
Q2MAF: QUADRUPOLE, TYPE=QP, L=0.15, K1=-5.385818273003;
Q1MAF: QUADRUPOLE, TYPE=QP, L=0.25, K1=5.984438451397;
Q1MF: QUADRUPOLE, TYPE=QP, L=0.25, K1=-1.826583895148;
Q2MF: QUADRUPOLE, TYPE=QP, L=0.25, K1=2.891106491683;
Q2MCH: QUADRUPOLE, TYPE=QP, L=0.25, K1=2.909401193186;
Q1F: QUADRUPOLE, TYPE=QP, L=0.15, K1=-1.652608649395;
Q1CH: QUADRUPOLE, TYPE=QP, L=0.15, K1=-1.606872952098;
Q2F: QUADRUPOLE, TYPE=QP, L=0.15, K1=2.49122847281;
D0W: DRIFT, L=0.5305;
D1W: DRIFT, L=0.3555;
L3W: DRIFT, L=LAMW/16.0;
L2W: DRIFT, L=LAMW/4.0;
BNDWP: RBEND, L=LAMW/4.0, ANGLE=THETAW, HGAP=GW, FINT=HLF;
BNDWM: RBEND, L=LAMW/4.0, ANGLE=-THETAW, HGAP=GW, FINT=HLF;
BNDWPH: RBEND, L=LAMW/8.0, ANGLE=THETAW/2.0, HGAP=GW, FINT=HLF;
BNDWMH: RBEND, L=LAMW/8.0, ANGLE=-THETAW/2.0, HGAP=GW, FINT=HLF;
D1CH: DRIFT, L=0.29855;
D2CH: DRIFT, L=0.6;
D3CH: DRIFT, L=0.2;
BBCHP: SBEND, L=0.6, ANGLE=0.0447213596, E1=0.0223606798, E2=0.0223606798;
BBCHM: SBEND, L=0.6, ANGLE=-0.0447213596, E1=-0.0223606798, E2=-0.0223606798;
SQ: QUADRUPOLE, TYPE=SQ, L=1.0e-6, KS1=0.0;
HALFTME: LINE=(D1,QAF,D2,SX,D3,SY,D4,QADH);
TME: LINE=(-HALFTME,HBB,HBB,HALFTME);
TMEM: LINE=(QADH,D4,SY,D3,SX,D2,QAF,D1,BB,D1,QAF,D2,SX,D3,SY,D4);
ARC: LINE=(QAD,D4,SY,D3,SX,D2,QAF,D1,BB,D1,QAF,D2,SX,D3,SY,D4);
ARCM: LINE=(D4,SY,D3,SX,D2,QAF,D1,BB,D1,QAF,D2,SX,D3,SY,D4);
CHICANE: LINE=(D1CH,BBCHP,D2CH,BBCHM,D3CH,BBCHM,D2CH,BBCHP,D1CH);
RFSTR: LINE=(DRF,CAVITY,DRF,CAVITY,DRF,CAVITY,DRF);
KCKSTR: LINE=(DKCK1,KCK,DKCK2);
SPTSTR: LINE=(DSPT1,SPT25,DSPT2,SPT90,DSPT3);
FMATCH: LINE=(Q2MAF,D2MAF,Q1MAF,D1MAF,HBBF,D1MF,Q1MF,D2MF,Q2MF);
CHMATCH: LINE=(Q2MAF,D2MAF,Q1MAF,D1MAF,HBBF,D1MF,Q1MF,D2MF,Q2MCH);
FCELL: LINE=(Q1F,D1F,Q2F,D1F);
FODO: LINE=(CHICANE,Q1CH,RFSTR,Q2F,KCKSTR,Q1F,D1F,Q2F,SPTSTR,SQ,2*FCELL,Q1F,-SPTSTR,Q2F,D1F,Q1F,-KCKSTR);
FODO1: LINE=(DKCK1);
FODO2: LINE=(CHICANE,Q1CH,RFSTR,Q2F,KCKSTR,Q1F,D1F,Q2F,SPTSTR,2*FCELL,Q1F,-SPTSTR,Q2F,D1F,Q1F,DKCK2,KCK);
WMATCH: LINE=(Q2MAW,D2MAW,Q1MAW,D1MAW,HBBW,D1MW,Q1MW,D2MW,Q2MW);
WIGPRD: LINE=(BNDWMH,L2W,BNDWP,L2W,BNDWMH);
WIGSEC: LINE=(BNDWPH,L3W,BNDWMH,16*WIGPRD,BNDWMH,L2W,BNDWP,L3W,BNDWMH);
WCELL: LINE=(Q1WH,D1W,WIGSEC,D1W,Q2W,D1W,WIGSEC,D1W,Q1WH);
WCEL: LINE=(D0W,WIGSEC,D1W,Q2W,D1W,WIGSEC,D1W,Q1WH);
WIGGLER: LINE=(WCEL,3*WCELL,-WCEL);
FULL: LINE=(8*ARC,WMATCH,WIGGLER,-WMATCH,ARCM,16*ARC,CHMATCH,FODO2,FODO1,-FMATCH,ARCM,8*ARC);
FULLT: LINE=(8*TME,TMEM,WMATCH,WIGGLER,-WMATCH,-TMEM,15*TME,TMEM,CHMATCH,FODO,-FMATCH,-TMEM,7*TME);
FULLW: LINE=(8*TME,TMEM,WMATCH,WIGGLER,-WMATCH,-TMEM,15*TME,TMEM,WMATCH,WIGGLER,-WMATCH,-TMEM,7*TME);
FULLCH: LINE=(8*TME,TMEM,CHMATCH,FODO,-FMATCH,-TMEM,15*TME,TMEM,CHMATCH,FODO,-FMATCH,-TMEM,7*TME);
INJ: LINE=(TMEM,CHMATCH,FODO,-FMATCH,-TMEM);
WIG: LINE=(TMEM,WMATCH,WIGGLER,-WMATCH,-TMEM);
SIMP: LINE=(8*ARC,QAD,ARCM,FMATCH,D1F,5*FCELL,Q1F,D1F,-FMATCH,-ARCM,7*ARC);
SIMPRF: LINE=(8*ARC,QAD,ARCM,FMATCH,DRF,CAVITY,DRF,5*FCELL,Q1F,D1F,-FMATCH,-ARCM,7*ARC);
LATTICE: LINE=(DST,36*TME,CAVSHRT);
STRAIGHT: LINE=(DST,TMEM,WMATCH,WIGGLER,-WMATCH,-TMEM,TMEM,CHMATCH,FODO,-FMATCH,-TMEM);
LAMW := 0.27;
BW := 2.15;
BRHO := 6.604569;
THETAW := BW*LAMW/(4.0*BRHO);
GW := 0.0;
HLF := 0.0;

Proton1: Beam;

LAMW := 0.27;
BW := 2.15;
BRHO := 6.604569;
THETAW := BW*LAMW/(4.0*BRHO);
GW := 0.0;
HLF := 0.0;

simplring: line = (36*ARC);

Select, Line=simplring;
T1:Twiss, Line=simplring, Beam=Proton1, Method="THICK", Order=2 , static=false;
List, Table=T1,   File="simplring.mou",All=true;
Matrix, Table=T1, File="simplringMatr.mou";
Stop;





Stop;
